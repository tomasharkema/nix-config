{
  "nix.enableLanguageServer": true,
  "nix.serverPath": "nixd",
  // "nix.serverPath": "nil",
  "nix.formatterPath": "alejandra",

  "nix.serverSettings": {
    // settings for 'nixd' LSP
    "nixd": {
        "formatting": {
            // This is the default if ommited.
            "command":  "alejandra" 
        },
        "options": {
            // By default, this entriy will be read from `import <nixpkgs> { }`
            // You can write arbitary nix expression here, to produce valid "options" declaration result.
            // Tip: for flake-based configuration, utilize `builtins.getFlake`
            "nixos": {
                "expr": "(builtins.getFlake \"${workspaceFolder}\").nixosConfigurations.voltron.options"
            },
            "home-manager": {
              "expr": "(builtins.getFlake \"${workspaceFolder}\").nixosConfigurations.voltron.options.home-manager"
          },
          "nix-darwin": {
            "expr": "(builtins.getFlake \"${workspaceFolder}\").darwinConfigurations.euro-mir.options"
          }
        }
    }
},
  
  "[nix]": {
    "editor.defaultFormatter": "kamadorueda.alejandra",
    "editor.formatOnPaste": false,
    "editor.formatOnSave": true,
    "editor.formatOnType": false
  },
}
